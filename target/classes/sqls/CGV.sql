-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- CGV_MEMBER Table Create SQL
CREATE TABLE CGV_MEMBER
(
    ID                  VARCHAR2(200)    NOT NULL, 
    PASSWORD            VARCHAR2(200)    NULL, 
    NAME                VARCHAR2(200)    NULL, 
    PHONE_NUMBER        VARCHAR2(200)    NULL, 
    EMAIL               VARCHAR2(200)    NULL, 
    AUTH                NUMBER(20)       NULL, 
    REGISTER_DATE       DATE             NULL, 
    UN_REGISTER_DATE    DATE             NULL, 
    CONSTRAINT CGV_MEMBER_PK PRIMARY KEY (ID)
)


-- CGV_MEMBER Table Create SQL
CREATE TABLE CGV_RESERVE
(
    ID                  VARCHAR2(200)    NULL, 
    RESERVE_SEQ         NUMBER(20)       NOT NULL, 
    TITLE               VARCHAR2(200)    NULL, 
    RUNNING_TIME        VARCHAR2(200)    NULL, 
    MOVIE_AGE           VARCHAR2(200)    NULL, 
    MOVIE_DATE          VARCHAR2(200)    NULL, 
    RESERVE_DATE        DATE             NULL, 
    TICKET_NUMBER       NUMBER(20)       NULL, 
    SELECTED_SEAT       VARCHAR2(200)    NULL, 
    SELECTED_THEATER    VARCHAR2(200)    NULL, 
    CONSTRAINT CGV_RESERVE_PK PRIMARY KEY (RESERVE_SEQ)
)
/

CREATE SEQUENCE CGV_RESERVE_SEQ
START WITH 1
INCREMENT BY 1;


ALTER TABLE CGV_RESERVE
    ADD CONSTRAINT FK_CGV_RESERVE_ID_CGV_MEMBER_I FOREIGN KEY (ID)
        REFERENCES CGV_MEMBER (ID)
/


-- CGV_MEMBER Table Create SQL
CREATE TABLE CGV_PAY
(
    ID             VARCHAR2(200)    NULL, 
    RESERVE_SEQ    NUMBER(20)       NULL, 
    PAY_DATE       DATE             NULL, 
    PAY_MONEY      VARCHAR2(200)     NULL   
)


ALTER TABLE CGV_PAY
    ADD CONSTRAINT FK_CGV_PAY_RESERVE_SEQ_CGV_RES FOREIGN KEY (RESERVE_SEQ)
        REFERENCES CGV_RESERVE (RESERVE_SEQ)
/

ALTER TABLE CGV_PAY
    ADD CONSTRAINT FK_CGV_PAY_ID_CGV_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES CGV_MEMBER (ID)
/


